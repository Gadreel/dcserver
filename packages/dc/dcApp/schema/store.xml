<Schema>
	<Database>
		<!-- extend tenant, use same id as was in the root domain for this domain -->
		<Table Id="dcTenant">
			<Field Name="dcmStoreOpen" Type="Boolean" />
			<Field Name="dcmWishListEnabled" Type="Boolean" />
			<Field Name="dcmShippingRateMode" Type="dcmShipRateModeEnum" />
			<!--
				find the lowest min for the order total

				[ { Min: NNN, Amount: $$$ }, { Min: NNN, Amount: $$$ } ]
			-->
			<Field Name="dcmShippingTable" Type="AnyRecord" />
		</Table>

		<!-- extend state -->
		<Table Id="dcState">
			<Field Name="dcmRate" Type="Decimal" />
			<Field Name="dcmRateName" Type="dcMetaString" />
		</Table>

		<!-- User as Customer -->
		<Table Id="dcUser">
			<!-- coupons used - tracked for 1 time use coupons -->
			<Field Name="dcmDiscounts" ForeignKey="dcmDiscount" List="True" />
		</Table>

		<Table Id="dcmOrder">
			<!--  this is what we are really using here -->

			<Field Name="dcmOrderDate" Type="DateTime" Required="True" Indexed="True" />

			<Field Name="dcmStatus" Type="dcmOrderStatusEnum" Required="True" Indexed="True" />
			<Field Name="dcmLastStatusDate" Type="DateTime" Required="True" Indexed="True" />

			<!-- when was customer last notified -->
			<Field Name="dcmLastCustomerNotice" Type="DateTime" />

			<Field Name="dcmCustomer" ForeignKey="dcUser" />

			<Field Name="dcmPaymentId" Type="dcSmallString" />

			<!-- dcmItems group - sub = EntryId -->
			<Field Name="dcmItemEntryId" Group="dcmItems" List="True" Type="dcMetaString" />
			<Field Name="dcmItemProduct" Group="dcmItems" List="True" ForeignKey="dcmProduct" />
			<Field Name="dcmItemQuantity" Group="dcmItems" List="True" Type="Integer" />
			<Field Name="dcmItemPrice" Group="dcmItems" List="True" Type="Decimal" />
			<Field Name="dcmItemTotal" Group="dcmItems" List="True" Type="Decimal" />
			<Field Name="dcmItemExtra" Group="dcmItems" List="True" Type="AnyRecord" />
			<Field Name="dcmItemCustomFields" Group="dcmItems" List="True" Type="AnyRecord" />
			<Field Name="dcmItemStatus" Group="dcmItems" List="True" Type="dcmItemStatusEnum" />
			<Field Name="dcmItemUpdated" Group="dcmItems" List="True" Type="DateTime" />
			<Field Name="dcmItemShipment" Group="dcmItems" List="True" Type="dcMetaString" />

			<Field Name="dcmCustomerInfo" Type="dcmOrderCustomerInfo" />
			<Field Name="dcmShippingInfo" Type="dcmOrderShippingInfo" />
			<Field Name="dcmBillingInfo" Type="dcmOrderBillingInfo" />
			<Field Name="dcmDelivery" Type="dcmDeliveryEnum" />
			<Field Name="dcmComment" Type="dcLargeString" />

			<!-- sub = EntryId -->
			<Field Name="dcmShipmentInfo" Type="dcmOrderShipmentInfo" List="True" />

			<!-- lowercase, TODO remove -->
			<Field Name="dcmKeywords" Type="dcLargeString" />

			<!-- we are trying to apply this code(s)  -->
			<Field Name="dcmCouponCodes" List="True" Type="dcMetaString" Indexed="True" />

			<!-- sub = EntryId -->
			<!-- this is what we get (could be a combined sale, coupon, gift cert) -->
			<Field Name="dcmDiscounts" List="True" Type="dcmDiscountInfo" />
			<Field Name="dcmPaymentInfo" Type="dcmOrderPaymentInfo" />
			<Field Name="dcmCalcInfo" Type="dcmOrderCalcInfo" />		<!-- not required coming in from outside world, but is required once payment is being processed -->

			<Field Name="dcmExtra" Type="AnyRecord" />

			<Field Name="dcmGrandTotal" Type="Decimal" />

			<!-- this will likely be used -->

			<Field Name="dcmExternalOrderId" Type="dcSmallString" />
			<Field Name="dcmExternalCustomerId" Type="dcSmallString" />

			<!-- TODO review
			<Field Name="dcmShippingNumber" Type="dcMetaString" />

			<Field Name="dcmPrintingPin" Type="dcMetaString" />
			<Field Name="dcmPrintPinExpiration" Type="DateTime" />
			-->

			<!-- for guest orders, need this code to view the order -->
			<Field Name="dcmViewCode" Type="dcSmallString" />

			<!-- need to rethink this one  -->

			<Field Name="dcmGateway" ForeignKey="dcmGateway" />

			<!-- sid = stamp -->
			<Field Name="dcmAudit" Type="dcmOrderAudit" List="True" />

			<!-- sid = stamp -->
			<Field Name="dcmRefundOn" Group="dcmRefund" Type="DateTime" List="True" />
			<Field Name="dcmRefundAmount" Group="dcmRefund" Type="Decimal" List="True" />
			<Field Name="dcmRefundId" Group="dcmRefund" Type="dcSmallString" List="True" />
		</Table>

		<!-- rethink this, move into order above (no we need some per item tracking)
			TODO no - actually move it to Thread
		<Table Id="dcmOrderLog">
			<Field Name="dcmOrder" ForeignKey="dcmOrder" />   ??? item ???
			<Field Name="dcmLogDate" Type="DateTime" />

			<Field Name="dcmStatus" Type="dcmOrderStatusEnum" />
			 Hide note From Customer
			<Field Name="dcmInternalMessage" Type="Boolean" />

			<Field Name="dcmNotes" Type="dcLargeString" />

			 if a shipment is associated with this entry
			<Field Name="dcmShippingNumber" Type="dcMetaString" />
		</Table>
		-->

		<Table Id="dcmCategory">
			<Field Name="dcmTitle" Type="dcSmallString" />
			<Field Name="dcmTitleTr" Type="dcSmallString" List="True" />
			<Field Name="dcmMode" Type="dcmCategoryModeEnum" />
			<Field Name="dcmAlias" Type="dcMetaString" Required="True" Unique="True" Indexed="True" />
			<Field Name="dcmShowInStore" Type="Boolean" />
			<Field Name="dcmImage" Type="dcString" />

			<Field Name="dcmParent" ForeignKey="dcmCategory" />

			<Field Name="dcmDescription" Type="String" />
			<Field Name="dcmDescriptionTr" Type="String" List="True" />

			<!-- sid = field name -->
			<Field Name="dcmCustomDisplayField" Type="dcMetaString" List="True" />

			<!-- if dcTenant:dcmShippingRateMode is PerItemFromCategory -->
			<Field Name="dcmShipAmount" Type="Decimal" />
		</Table>

		<Table Id="dcmProduct">
			<!-- product is still on record but no longer sold -->
			<Field Name="dcmDisabled" Type="Boolean" />
			<!-- can still be purchased, just shouldn't be shown on its own -->
			<Field Name="dcmPurchaseOnline" Type="Boolean" />
			<Field Name="dcmShowInStore" Type="Boolean" />
			<Field Name="dcmShowInFavorites" Type="Boolean" Indexed="True" />
			<Field Name="dcmDelivery" Type="dcmDeliveryEnum" List="True" />

			<Field Name="dcmTitle" Type="dcSmallString" />
			<Field Name="dcmTitleTr" Type="dcSmallString" List="True" />
			<Field Name="dcmAlias" Type="dcMetaString" Required="True" Unique="True" Indexed="True" />
			<Field Name="dcmSku" Type="dcMetaString" Indexed="True" />
			<Field Name="dcmDescription" Type="String" />
			<Field Name="dcmDescriptionTr" Type="String" List="True" />
			<Field Name="dcmInstructions" Type="dcString" />
			<Field Name="dcmInstructionsTr" Type="dcString" List="True" />
			<Field Name="dcmImage" Type="dcString" />

			<!-- sid = field name -->
			<!--
			<Field Name="dcmCustomDisplayField" Type="dcSmallString" List="True" />
			-->

			<!-- tag = tag -->
			<Field Name="dcmTag" Type="dcMetaString" List="True" />

			<Field Name="dcmCategories" ForeignKey="dcmCategory" List="True" />
			<!-- TODO review
			<Field Name="dcmCategoryPosition" Type="Integer" />
			-->

			<Field Name="dcmVariablePrice" Type="Boolean" />
			<Field Name="dcmMinimumPrice" Type="Decimal" />
			<Field Name="dcmPrice" Type="Decimal" />
			<Field Name="dcmSalePrice" Type="Decimal" />

			<Field Name="dcmInventory" Type="Integer" Audit="False" />
			<Field Name="dcmOrderLimit" Type="Integer" />

			<!-- if dcTenant:dcmShippingRateMode is PerItem -->
			<Field Name="dcmShipAmount" Type="Decimal" />

			<Field Name="dcmShipWeight" Type="Decimal" />

			<!-- for donations, etc -->
			<Field Name="dcmTaxFree" Type="Boolean" />

			<!-- Free for donations, electronic content, etc -->
			<Field Name="dcmShipCost" Type="dcmShipCostEnum" />
		</Table>

		<Table Id="dcmProductCustomFields">
			<!-- either product or form -->
			<Field Name="dcmProduct" ForeignKey="dcmProduct" />
			<Field Name="dcmBasicCustomForm" ForeignKey="dcmBasicCustomForm" />
			<Field Name="dcmPosition" Type="Integer" />

			<Field Name="dcmFieldType" Type="dcMetaString" />
			<Field Name="dcmDataType" Type="dcMetaString" />
			<Field Name="dcmLabel" Type="dcSmallString" />
			<Field Name="dcmLongLabel" Type="dcSmallString" />
			<Field Name="dcmPlaceholder" Type="dcSmallString" />
			<Field Name="dcmPattern" Type="dcMetaString" />
			<Field Name="dcmRequired" Type="Boolean" />
			<Field Name="dcmMaxLength" Type="Integer" />
			<Field Name="dcmHorizontal" Type="Boolean" />
			<!-- if Checkbox or YesNo, what price to apply if true -->
			<Field Name="dcmPrice" Type="Decimal" />

			<!-- Options group -->
			<Field Name="dcmOptionLabel" Group="Options" Type="dcSmallString" List="True" />
			<Field Name="dcmOptionValue" Group="Options" Type="dcMetaString" List="True" />
			<Field Name="dcmOptionPrice" Group="Options" Type="Decimal" List="True" />
			<Field Name="dcmOptionWeight" Group="Options" Type="Decimal" List="True" />
			<Field Name="dcmOptionDisabled" Group="Options" Type="Boolean" List="True" />
		</Table>

		<Table Id="dcmDiscount">
			<Field Name="dcmEntryDate" Type="DateTime" />

			<Field Name="dcmCode" Type="dcMetaString" Indexed="True" Unique="True" />
			<Field Name="dcmTitle" Type="dcSmallString" />
			<Field Name="dcmType" Type="dcmDiscountTypeEnum" Indexed="True" />
			<Field Name="dcmMode" Type="dcmDiscountModeEnum" />
			<Field Name="dcmActive" Type="Boolean" />

			<Field Name="dcmAmount" Type="Decimal" />
			<Field Name="dcmMinimumOrder" Type="Decimal" />

			<Field Name="dcmStart" Type="DateTime" />
			<Field Name="dcmExpire" Type="DateTime" />

			<!-- this is a general discount (sale), no code required -->
			<Field Name="dcmAutomatic" Type="Boolean" />
			<Field Name="dcmOneTimeUse" Type="Boolean" />

			<Field Name="dcmWasUsed" Type="Boolean" />
			<Field Name="dcmAmountUsed" Type="Decimal" />
			<Field Name="dcmForCustomer" ForeignKey="dcUser" />
		</Table>

		<Table Id="dcmGiftRegistry">
			<Field Name="dcmEventType" Type="dcMetaString" />
			<Field Name="dcmEventDate" Type="LocalDate" />

			<Field Name="dcmFor" Type="dcString" />
			<!-- for searches -->
			<Field Name="dcmKeywords" Type="dcString" />
			<Field Name="dcmIntro" Type="dcString" />
			<Field Name="dcmDetail" Type="dcLargeString" />

			<Field Name="dcmProducts" List="True" ForeignKey="dcmProduct" />
		</Table>

		<Procedure Name="dcmRecordShipment" Execute="dcraft.cms.store.db.orders.RecordShipment" />
		<Procedure Name="dcmUpdateItems" Execute="dcraft.cms.store.db.orders.UpdateItems" />

		<Procedure Name="dcmStoreServices.Orders.CalcShipWeight" Execute="dcraft.cms.store.db.orders.CalcShipWeight" />
		<Procedure Name="dcmStoreServices.Orders.Calculate" Execute="dcraft.cms.store.db.orders.Calculate" />
		<Procedure Name="dcmStoreServices.Orders.Submit" Execute="dcraft.cms.store.db.orders.Submit" />
		<Procedure Name="dcmStoreServices.Orders.Load" Execute="dcraft.cms.store.db.orders.Load" />
		<Procedure Name="dcmStoreServices.Orders.ResendReceipts" Execute="dcraft.cms.store.db.orders.ResendReceipts" />
		<Procedure Name="dcmStoreServices.Orders.UpdateItems" Execute="dcraft.cms.store.db.orders.UpdateItems" />
		<Procedure Name="dcmStoreServices.Orders.UpdateStatus" Execute="dcraft.cms.store.db.orders.UpdateStatus" />
		<Procedure Name="dcmStoreServices.Orders.Refund" Execute="dcraft.cms.store.db.orders.Refund" />
		<Procedure Name="dcmStoreServices.Orders.Update" Execute="dcraft.cms.store.db.orders.Update" />

		<Procedure Name="dcmStoreServices.Orders.Track" Execute="dcraft.cms.store.db.orders.Track" />
		<Procedure Name="dcmStoreServices.Orders.PayPalStandard" Execute="dcraft.cms.store.db.orders.PayPalStandard" />

		<Procedure Name="dcmStoreServices.Discounts.List" Execute="dcraft.cms.store.db.discounts.List" />
		<Procedure Name="dcmStoreServices.Discounts.Load" Execute="dcraft.cms.store.db.discounts.Load" />
		<Procedure Name="dcmStoreServices.Discounts.Update" Execute="dcraft.cms.store.db.discounts.Update" />
		<Procedure Name="dcmStoreServices.Discounts.Add" Execute="dcraft.cms.store.db.discounts.Add" />
		<Procedure Name="dcmStoreServices.Discounts.Retire" Execute="dcraft.cms.store.db.discounts.Retire" />
		<Procedure Name="dcmStoreServices.Discounts.Revive" Execute="dcraft.cms.store.db.discounts.Revive" />

		<Procedure Name="dcmStoreServices.Product.Load" Execute="dcraft.cms.store.db.products.Load" />
		<Procedure Name="dcmStoreServices.Product.LoadCustomFields" Execute="dcraft.cms.store.db.products.LoadCustomFields" />
		<Procedure Name="dcmStoreServices.Product.LoadCustomField" Execute="dcraft.cms.store.db.products.LoadCustomField" />
		<Procedure Name="dcmStoreServices.Product.AddCustomField" Execute="dcraft.cms.store.db.products.AddCustomField" />
		<Procedure Name="dcmStoreServices.Product.UpdateCustomField" Execute="dcraft.cms.store.db.products.UpdateCustomField" />
		<Procedure Name="dcmStoreServices.Product.RemoveCustomField" Execute="dcraft.cms.store.db.products.RemoveCustomField" />
		<Procedure Name="dcmStoreServices.Product.UpdateCustomFieldPositions" Execute="dcraft.cms.store.db.products.UpdateCustomFieldPositions" />

		<Composer Name="dcmStoreImage" Execute="dcraft.cms.store.db.comp.StoreImage" />
		<Composer Name="dcmProductPrice" Execute="dcraft.cms.store.db.comp.ProductPrice" />
		<Composer Name="dcmCalcOrderLimit" Execute="dcraft.cms.store.db.comp.CalcOrderLimit" />
		<Composer Name="dcmOrderItemCustomFields" Execute="dcraft.cms.store.db.comp.OrderItemCustomFields" />
	</Database>

	<Shared>
		<StringType Id="dcmShipRateModeEnum">
			<StringRestriction Enum="Disabled,OrderWeight,OrderTotal,PerItem,PerItemFromCategory,Custom" />
		</StringType>

		<StringType Id="dcmShipCostEnum">
			<StringRestriction Enum="Regular,Extra,Fixed,Free" />
		</StringType>

		<StringType Id="dcmDiscountTypeEnum">
			<StringRestriction Enum="Coupon,Sale,GiftCertificate,Credit" />
		</StringType>

		<StringType Id="dcmDiscountModeEnum">
			<StringRestriction Enum="FixedOffTotal,FixedOffProduct,PercentOffProduct,FixedOffShipping,PercentOffShipping,FlatShipping,FreeShipping" />
		</StringType>

		<StringType Id="dcmCategoryModeEnum">
			<StringRestriction Enum="TopWithSub,TopWithProduct,Sub" />
		</StringType>

		<StringType Id="dcmOrderStatusEnum">
			<StringRestriction Enum="Pending,AwaitingPayment,AwaitingFulfillment,AwaitingShipment,AwaitingPickup,PartiallyCompleted,Completed,Canceled,VerificationRequired" />
		</StringType>

		<StringType Id="dcmItemStatusEnum">
			<StringRestriction Enum="AwaitingFulfillment,AwaitingShipment,AwaitingPickup,Completed,Canceled" />
		</StringType>

		<StringType Id="dcmDeliveryEnum">
			<StringRestriction Enum="Ship,Pickup,Download" />
		</StringType>

		<StringType Id="dcmPaymentMethodEnum">
			<StringRestriction Enum="CreditCard,StoreCredit,PayPal,Manual" />
		</StringType>

		<StringType Id="dcmTargetUserEnum">
			<StringRestriction Enum="Store,Customer" />
		</StringType>

		<!-- https://www.w3resource.com/javascript/form/credit-card-validation.php -->
		<StringType Id="dcmCreditCard">
			<!-- Visa -->
			<StringRestriction Pattern="(?:4[0-9]{12}(?:[0-9]{3})?)" />
			<!-- Master Card -->
			<StringRestriction Pattern="(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}" />
			<!-- Discover -->
			<StringRestriction Pattern="(?:6(?:011|5[0-9][0-9])[0-9]{12})" />
			<!-- AMX -->
			<StringRestriction Pattern="(?:3[47][0-9]{13})" />
		</StringType>

		<Record Id="dcmOrderItemInfo">
			<!-- uuid for this item entry -->
			<Field Name="EntryId" Type="dcMetaString" Required="True" />
			<Field Name="Product" Type="Id" Required="True" />
			<Field Name="Quantity" Type="Integer" Required="True" />

			<Field Name="Title" Type="dcmProduct:dcmTitle" />
			<Field Name="Alias" Type="dcmProduct:dcmAlias" />
			<Field Name="Sku" Type="dcmProduct:dcmSku" />
			<Field Name="Description" Type="dcmProduct:dcmDescription" />
			<Field Name="Instructions" Type="dcmProduct:dcmInstructions" />
			<Field Name="Delivery">
				<List Type="dcmProduct:dcmDelivery" />
			</Field>
			<Field Name="CatTitle" Type="dcmCategory:dcmTitle" />
			<Field Name="CatAlias" Type="dcmCategory:dcmAlias" />
			<Field Name="Image" Type="dcmProduct:dcmImage" />
			<Field Name="ImagePath" Type="dcString" />

			<!-- TODO
			<Field Name="dcmCustomDisplayField">
				<List Type="dcSmallString">
			</Field>
			 -->

			<Field Name="Tags">
				<List Type="dcmProduct:dcmTag" />
			</Field>

			<Field Name="Price" Type="dcmProduct:dcmPrice" />
			<Field Name="SalePrice" Type="dcmProduct:dcmSalePrice" />
			<Field Name="Total" Type="Decimal" />
			<Field Name="VariablePrice" Type="dcmProduct:dcmVariablePrice" />
			<Field Name="MinimumPrice" Type="dcmProduct:dcmMinimumPrice" />

			<!-- for donations, etc -->
			<Field Name="TaxFree" Type="dcmProduct:dcmTaxFree" />

			<!-- for donations, electronic content, etc -->
			<Field Name="ShipCost" Type="dcmProduct:dcmShipCost" />

			<Field Name="OrderLimit" Type="dcmProduct:dcmOrderLimit" />

			<Field Name="Extra" Type="AnyRecord" />
			<Field Name="CustomFields" Type="AnyRecord" />

			<Field Name="CustomFieldsDisplay">
				<List>
					<Record>
						<Field Name="Id" Type="Id" />
						<Field Name="Label" Type="dcSmallString" />
						<Field Name="DisplayValue" Type="dcSmallString" />
						<Field Name="Value" Type="Any" />
						<Field Name="Price" Type="Decimal" />
						<Field Name="Weight" Type="Decimal" />
					</Record>
				</List>
			</Field>
		</Record>

		<Record Id="dcmOrderCustomerInfo" >
			<Field Name="FirstName" Type="dcTinyString" Required="True" />
			<Field Name="LastName" Type="dcTinyString" Required="True" />
			<Field Name="Email" Type="dcEmail" Required="True" />
			<!-- Required won't pass data validation if running a calculate before checkout -->
			<Field Name="Phone" Type="dcTinyString" />
			<!-- if present and not logged in the create an account -->
			<Field Name="Password" Type="dcSmallString" />
			<Field Name="CustomerId" Type="dcUser:Id" />
			<!-- tax exempt -->
			<Field Name="TaxExempt" Type="Boolean" />
			<Field Name="TaxExemptId" Type="dcMetaString" />
		</Record>

		<Record Id="dcmOrderShippingInfo" >
			<Field Name="FirstName" Type="dcTinyString" Required="True" />
			<Field Name="LastName" Type="dcTinyString" Required="True" />
			<Field Name="Address" Type="dcSmallString" Required="True" />
			<Field Name="Address2" Type="dcSmallString" />
			<Field Name="City" Type="dcTinyString" Required="True" />
			<Field Name="State" Type="dcUsaState" Required="True" />
			<Field Name="Zip" Type="dcUsaZip" Required="True" />
			<!-- alias of selected estimate -->
			<Field Name="SelectedEstimate" Type="dcMetaString" />
		</Record>

		<!-- one per package -->
		<Record Id="dcmOrderShipmentInfo" >
			<!-- uuid for this item entry -->
			<Field Name="EntryId" Type="dcMetaString" Required="True" />
			<!-- USPS, FedEx, UPS, etc -->
			<Field Name="ShipProvider" Type="dcMetaString" Required="True" />
			<!-- such as ground, express, etc -->
			<Field Name="ShipService" Type="dcMetaString" />
			<!-- url or id to track -->
			<Field Name="TrackLink" Type="dcString" />
			<Field Name="TrackId" Type="dcMetaString" />
			<Field Name="Cost" Type="Decimal" />
			<Field Name="Purchased" Type="DateTime" />

			<!-- package shipped -->
			<Field Name="Width" Type="Decimal" />
			<Field Name="Height" Type="Decimal" />
			<Field Name="Depth" Type="Decimal" />
			<Field Name="Weight" Type="Decimal" />

			<!-- where shipped -->
			<Field Name="FirstName" Type="dcTinyString" />
			<Field Name="LastName" Type="dcTinyString" />
			<Field Name="Address" Type="dcSmallString" />
			<Field Name="Address2" Type="dcSmallString" />
			<Field Name="City" Type="dcTinyString" />
			<Field Name="State" Type="dcUsaState" />
			<Field Name="Zip" Type="dcUsaZip" />
		</Record>

		<Record Id="dcmOrderBillingInfo" >
			<Field Name="FirstName" Type="dcTinyString" Required="True" />
			<Field Name="LastName" Type="dcTinyString" Required="True" />
			<Field Name="Address" Type="dcSmallString" Required="True" />
			<Field Name="Address2" Type="dcSmallString" />
			<Field Name="City" Type="dcTinyString" Required="True" />
			<Field Name="State" Type="dcUsaState" Required="True" />
			<Field Name="Zip" Type="dcUsaZip" Required="True" />
		</Record>

		<Record Id="dcmDiscountInfo">
			<Field Name="EntryId" Type="dcMetaString" Required="True" />
			<Field Name="Discount" Type="Id" Required="True" />
			<Field Name="Code" Type="dcmDiscount:dcmCode" Required="True" />
			<Field Name="Title" Type="dcmDiscount:dcmTitle" Required="True" />
			<Field Name="Amount" Type="dcmDiscount:dcmAmount" Required="True" />
		</Record>

		<Record Id="dcmOrderPaymentInfo">
			<Field Name="PaymentMethod" Type="dcmPaymentMethodEnum" Required="True" />
			<Field Name="CardNumber" Type="dcTinyString" />
			<Field Name="Expiration" Type="dcTinyString" />
			<Field Name="Code" Type="dcTinyString" />

			<Field Name="Token1" Type="dcString" />
			<Field Name="Token2" Type="dcString" />
			<!-- for tracking message -->
			<Field Name="Uuid" Type="dcMetaString" />
			<Field Name="PaymentTx" Type="dcMetaString" />
		</Record>

		<Record Id="dcmShipEstimateInfo">
			<Field Name="Title" Type="dcSmallString" />
			<Field Name="Alias" Type="dcMetaString" />
			<Field Name="Amount" Type="Decimal" />
		</Record>

		<Record Id="dcmOrderCalcInfo">
			<!-- product total before discount is applied  -->
			<Field Name="ItemCalc" Type="Decimal" Required="True" />
			<!-- counts toward taxes -->
			<Field Name="ProductDiscount" Type="Decimal" Required="True" />
			<!-- product total after discount is applied  -->
			<Field Name="ItemTotal" Type="Decimal" Required="True" />

			<!-- amount that counts toward shipping -->
			<Field Name="ShipCalc" Type="Decimal" Required="True" />
			<!-- shipping amount for this order  -->
			<Field Name="ShipAmount" Type="Decimal" Required="True" />
			<Field Name="ShipDiscount" Type="Decimal" Required="True" />
			<!-- does not count toward taxes -->
			<!-- shipping after discount is applied  -->
			<Field Name="ShipTotal" Type="Decimal" Required="True" />

			<!-- amount that counts toward taxes, after product discount applied (removing any tax free items) -->
			<Field Name="TaxCalc" Type="Decimal" Required="True" />
			<Field Name="TaxAt" Type="Decimal" Required="True" />
			<Field Name="TaxTotal" Type="Decimal" Required="True" />

			<!-- item total + ship total + tax total  -->
			<Field Name="GrandTotal" Type="Decimal" Required="True" />
		</Record>

		<Record Id="dcmOrderInfo" >
			<Field Name="Captcha" Type="String" />

			<Field Name="Items" Required="True">
				<List Type="dcmOrderItemInfo" />
			</Field>
			<Field Name="CustomerInfo" Type="AnyRecord" />
			<Field Name="ShippingInfo" Type="AnyRecord" />
			<Field Name="BillingInfo" Type="AnyRecord" />
			<Field Name="Delivery" Type="dcmDeliveryEnum" Required="True" />
			<Field Name="Comment" Type="dcLargeString" />
			<Field Name="CouponCodes">
				<List Type="dcSmallString" /> 	<!-- we are trying to apply this code(s) (could be comma list)  -->
			</Field>
			<Field Name="Discounts"> 		<!-- this is what we get (could be a combined sale, coupon, gift cert) -->
				<List Type="dcmDiscountInfo" />
			</Field>
			<Field Name="DiscountsSignature" Type="dcLargeString" />

			<!-- this is just an incoming flag to tell the system to create an estimate -->
			<Field Name="ShipEstimateRequest" Type="Boolean" />
			<Field Name="ShipEstimates">
				<List Type="dcmShipEstimateInfo" />
			</Field>
			<Field Name="ShipEstimatesSignature" Type="dcLargeString" />

			<Field Name="PaymentInfo" Type="dcmOrderPaymentInfo" />
			<Field Name="CalcInfo" Type="dcmOrderCalcInfo" />		<!-- not required coming in from outside world, but is required once payment is being processed -->

			<Field Name="Extra" Type="AnyRecord" />
			<Field Name="CustomFields" Type="AnyRecord" />
		</Record>

		<Record Id="dcmOrderInfoSubmit" Inherits="dcmOrderInfo">
			<Field Name="CustomerInfo" Type="dcmOrderCustomerInfo" Required="True" />
			<Field Name="ShippingInfo" Type="dcmOrderShippingInfo" />
			<Field Name="BillingInfo" Type="dcmOrderBillingInfo" />
		</Record>

		<!-- this needs more review, it might be better as a Thread -->
		<Record Id="dcmOrderNotice">
			<Field Name="For" Type="dcmTargetUserEnum" />
			<Field Name="Stamp" Type="DateTime" />
			<Field Name="Type" Type="dcMetaString" />
		</Record>

		<Record Id="dcmOrderAudit">
			<Field Name="Origin" Type="dcmTargetUserEnum" />
			<Field Name="Stamp" Type="DateTime" />
			<Field Name="Internal" Type="Boolean" />
			<Field Name="Comment" Type="dcLargeString" />
			<Field Name="Status" Type="dcmOrderStatusEnum" />
			<!-- also needs review, notice stamp is the notice item responding too -->
			<Field Name="NoticeStamp" Type="DateTime" />
		</Record>

		<Record Id="dcmOrderItemList">
			<!-- uuid for this item entry -->
			<Field Name="EntryId" Type="dcMetaString" Required="True" />
			<Field Name="Product" Type="Id" Required="True" />
			<Field Name="Quantity" Type="Integer" Required="True" />

			<Field Name="Title" Type="dcmProduct:dcmTitle" />
			<Field Name="Alias" Type="dcmProduct:dcmAlias" />
			<Field Name="Sku" Type="dcmProduct:dcmSku" />
			<Field Name="Description" Type="dcmProduct:dcmDescription" />
			<Field Name="Instructions" Type="dcmProduct:dcmInstructions" />
			<Field Name="Image" Type="dcmProduct:dcmImage" />
			<Field Name="Price" Type="dcmProduct:dcmPrice" />
			<Field Name="Total" Type="Decimal" />
			<Field Name="Status" Type="dcmItemStatusEnum" />

			<Field Name="Updated" Type="DateTime" />
			<Field Name="Shipment" Type="dcMetaString" />

			<Field Name="CustomFields">
				<List>
					<Record>
						<Field Name="Id" Type="Id" />
						<Field Name="Label" Type="dcSmallString" />
						<Field Name="DisplayValue" Type="dcSmallString" />
						<Field Name="Value" Type="Any" />
						<Field Name="Price" Type="Decimal" />
						<Field Name="Weight" Type="Decimal" />
					</Record>
				</List>
			</Field>
		</Record>
	</Shared>

	<Services>
		<Service Name="dcmStoreServices">
			<Feature Name="Orders">
				<Secure Badges="User,Guest">
					<Op Name="Calculate">
						<Description>
							Calculate shipping, discounts and taxes, return full order.
						</Description>
						<RecordRequest Inherits="dcmOrderInfo" Required="True" />
						<RecordResponse Inherits="dcmOrderInfo" />
					</Op>
					<Op Name="Submit">
						<Description>
							Place an order.
						</Description>
						<RecordRequest Inherits="dcmOrderInfoSubmit" Required="True" />
						<RecordResponse>
							<Field Name="Id" Type="Id" />
							<Field Name="Cart" Type="dcmOrderInfo" />
							<Field Name="ViewCode" Type="dcSmallString" />
							<Field Name="UploadToken" Type="dcTinyString" />
							<Field Name="Uuid" Type="dcMetaString" />
						</RecordResponse>
					</Op>
				</Secure>
				<Secure Badges="User">
					<Op Name="LoadMy">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="OrderDate" Type="DateTime" />
							<Field Name="Status" Type="dcmOrderStatusEnum" />
							<Field Name="LastStatusDate" Type="DateTime" />
							<Field Name="LastNotify" Type="DateTime" />
							<Field Name="Customer" Type="Id" />
							<Field Name="CustomerInfo" Type="dcmOrderCustomerInfo" />
							<Field Name="Delivery" Type="dcmDeliveryEnum" />
							<Field Name="Items">
								<List Type="dcmOrderItemList" />
							</Field>
							<Field Name="ShippingInfo" Type="dcmOrderShippingInfo" />
							<Field Name="Shipments">
								<List Type="dcmOrderShipmentInfo" />
							</Field>
							<Field Name="BillingInfo" Type="dcmOrderBillingInfo" />
							<Field Name="Comment" Type="dcLargeString" />
							<Field Name="CouponCodes">
								<List Type="dcSmallString" />
							</Field>
							<Field Name="Discounts">
								<List Type="dcmDiscountInfo" />
							</Field>
							<Field Name="PaymentId" Type="dcSmallString" />
							<Field Name="PaymentInfo" Type="dcmOrderPaymentInfo" />
							<Field Name="CalcInfo" Type="dcmOrderCalcInfo" />
							<Field Name="GrandTotal" Type="Decimal" />
						</RecordResponse>
					</Op>
					<Op Name="ListMy">
						<ListResponse>
							<Record>
								<Field Name="Id" Type="Id" />
								<Field Name="OrderDate" Type="DateTime" />
								<Field Name="Status" Type="dcmOrderStatusEnum" />
								<Field Name="CustomerInfo" Type="dcmOrderCustomerInfo" />
								<Field Name="Delivery" Type="dcmDeliveryEnum" />
								<Field Name="GrandTotal" Type="Decimal" />
							</Record>
						</ListResponse>
					</Op>
				</Secure>
				<Secure Badges="Admin,Clerk">
					<Op Name="Load">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="OrderDate" Type="DateTime" />
							<Field Name="Status" Type="dcmOrderStatusEnum" />
							<Field Name="LastStatusDate" Type="DateTime" />
							<Field Name="Customer" Type="Id" />
							<Field Name="CustomerInfo" Type="dcmOrderCustomerInfo" />
							<Field Name="Delivery" Type="dcmDeliveryEnum" />
							<Field Name="Items">
								<List Type="dcmOrderItemList" />
							</Field>
							<Field Name="ShippingInfo" Type="dcmOrderShippingInfo" />
							<Field Name="BillingInfo" Type="dcmOrderBillingInfo" />
							<Field Name="Comment" Type="dcLargeString" />
							<Field Name="CouponCodes">
								<List Type="dcSmallString" />
							</Field>
							<Field Name="Discounts">
								<List Type="dcmDiscountInfo" />
							</Field>
							<Field Name="PaymentId" Type="dcSmallString" />
							<Field Name="PaymentInfo" Type="dcmOrderPaymentInfo" />
							<Field Name="CalcInfo" Type="dcmOrderCalcInfo" />
							<Field Name="GrandTotal" Type="Decimal" />
							<Field Name="Audit">
								<List Type="dcmOrderAudit" />
							</Field>
							<Field Name="Shipments">
								<List Type="dcmOrderShipmentInfo" />
							</Field>
							<Field Name="Extra" Type="dcmOrder:dcmExtra" />
						</RecordResponse>
					</Op>
					<Op Name="Update">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="CustomerInfo" Type="dcmOrderCustomerInfo" />
							<Field Name="Delivery" Type="dcmDeliveryEnum" />
							<Field Name="ShippingInfo" Type="dcmOrderShippingInfo" />
							<Field Name="Comment" Type="dcLargeString" />
						</RecordRequest>
					</Op>
					<Op Name="ResendReceipts">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="UpdateStatus">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="Status" Type="dcmOrderStatusEnum" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="UpdateItems">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="Status" Type="dcmItemStatusEnum" Required="True" />
							<Field Name="Items" Required="True">
								<List Type="dcMetaString" />
							</Field>
						</RecordRequest>
					</Op>
					<Op Name="AddComment">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="Internal" Type="Boolean" />
							<Field Name="Comment" Type="dcLargeString" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="EstimateItems">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="Shipment" Type="dcmOrderShipmentInfo" Required="True" />
							<Field Name="Items" Required="True">
								<List Type="dcMetaString" />
							</Field>
						</RecordRequest>
					</Op>
					<Op Name="CalcShipWeight">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="Items" Required="True">
								<List Type="dcMetaString" />
							</Field>
						</RecordRequest>
						<RecordResponse>
							<!-- package shipped -->
							<Field Name="Width" Type="Decimal" />
							<Field Name="Height" Type="Decimal" />
							<Field Name="Depth" Type="Decimal" />
							<Field Name="Weight" Type="Decimal" />
						</RecordResponse>
					</Op>
					<Op Name="ShipItems">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="Shipment" Type="dcmOrderShipmentInfo" Required="True" />
							<Field Name="Items" Required="True">
								<List Type="dcMetaString" />
							</Field>
						</RecordRequest>
					</Op>
					<Op Name="Search">
						<RecordRequest Required="True">
							<Field Name="Term" Type="dcSmallString" />
							<Field Name="Scope" Type="dcTinyString" />
						</RecordRequest>
						<ListResponse>
							<Record>
								<Field Name="Id" Type="Id" />
								<Field Name="OrderDate" Type="DateTime" />
								<Field Name="Status" Type="dcmOrderStatusEnum" />
								<Field Name="CustomerInfo" Type="dcmOrderCustomerInfo" />
								<Field Name="Delivery" Type="dcmDeliveryEnum" />
								<Field Name="GrandTotal" Type="Decimal" />
							</Record>
						</ListResponse>
					</Op>
					<Op Name="PayPalStandard">
						<Description>
							Track a PayPal transaction.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Data" Type="dcString" Required="True" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="Id" />
							<Field Name="Cart" Type="dcmOrderInfo" />
							<Field Name="ViewCode" Type="dcSmallString" />
							<Field Name="UploadToken" Type="dcTinyString" />
						</RecordResponse>
					</Op>
					<Op Name="Refund">
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<!-- empty if FULL refund or void -->
							<Field Name="Amount" Type="Decimal" />
							<Field Name="Cancel" Type="Boolean" />
						</RecordRequest>
					</Op>
				</Secure>
			</Feature>
			<Feature Name="Category">
				<Secure Badges="Admin,Clerk">
					<Op Name="Load">
						<Description>
							Load a category record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmCategory:Id" />
							<Field Name="Alias" Type="dcmCategory:dcmAlias" />
							<Field Name="TrLocale" Type="dcMetaString" Required="IfPresent" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="dcmCategory:Id" />
							<Field Name="Title" Type="dcmCategory:dcmTitle" />
							<Field Name="Alias" Type="dcmCategory:dcmAlias" />
							<Field Name="Mode" Type="dcmCategory:dcmMode" />
							<Field Name="Parent" Type="dcmCategory:dcmParent" />
							<Field Name="Description" Type="dcmCategory:dcmDescription" />
							<Field Name="CustomDisplayField" Type="AnyList" />
							<Field Name="ShipAmount" Type="dcmCategory:dcmShipAmount" />
							<Field Name="Image" Type="dcmCategory:dcmImage" />
							<Field Name="ImagePath" Type="dcString" />
							<Field Name="ShowInStore" Type="dcmCategory:dcmShowInStore" />
							<Field Name="Children">
								<List>
									<Record>
										<Field Name="Id" Type="dcmCategory:Id" />
										<Field Name="Title" Type="dcmCategory:dcmTitle" />
										<Field Name="Alias" Type="dcmCategory:dcmAlias" />
										<Field Name="Mode" Type="dcmCategory:dcmMode" />
										<Field Name="Parent" Type="dcmCategory:dcmParent" />
										<Field Name="Description" Type="dcmCategory:dcmDescription" />
									</Record>
								</List>
							</Field>
						</RecordResponse>
					</Op>
					<Op Name="Update">
						<Description>
							Update a category record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmCategory:Id" Required="True" />
							<Field Name="TrLocale" Type="dcMetaString" Required="IfPresent" />
							<Field Name="Title" Type="dcmCategory:dcmTitle" Required="IfPresent" />
							<Field Name="Alias" Type="dcmCategory:dcmAlias" Required="IfPresent" />
							<Field Name="Mode" Type="dcmCategory:dcmMode" Required="IfPresent" />
							<Field Name="Parent" Type="dcmCategory:dcmParent" />
							<Field Name="Description" Type="dcmCategory:dcmDescription" />
							<Field Name="ShipAmount" Type="dcmCategory:dcmShipAmount" />
							<Field Name="Image" Type="dcmCategory:dcmImage" />
							<Field Name="ShowInStore" Type="dcmCategory:dcmShowInStore" />
						</RecordRequest>
					</Op>
					<Op Name="Add">
						<Description>
							Add a category record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Title" Type="dcmCategory:dcmTitle" Required="True" />
							<Field Name="TrLocale" Type="dcMetaString" Required="IfPresent" />
							<Field Name="Alias" Type="dcmCategory:dcmAlias" Required="True" />
							<Field Name="Mode" Type="dcmCategory:dcmMode" Required="True" />
							<Field Name="Parent" Type="dcmCategory:dcmParent" />
							<Field Name="Description" Type="dcmCategory:dcmDescription" />
							<Field Name="ShipAmount" Type="dcmCategory:dcmShipAmount" />
							<Field Name="Image" Type="dcmCategory:dcmImage" />
							<Field Name="ShowInStore" Type="dcmCategory:dcmShowInStore" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="dcmCategory:Id" />
						</RecordResponse>
					</Op>
					<Op Name="Retire">
						<Description>
							Remove (retire) category record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmCategory:Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="Revive">
						<Description>
							Undo retirement of category record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmCategory:Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="Lookup">
						<Description>
							Find category record id based on title.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Alias" Type="dcmCategory:dcmAlias" Required="True" />
						</RecordRequest>
						<ListResponse>
							<Record>
								<Field Name="Id" Type="dcmCategory:Id" />
								<Field Name="Title" Type="dcmCategory:dcmTitle" />
								<Field Name="Alias" Type="dcmCategory:dcmAlias" />
								<Field Name="Mode" Type="dcmCategory:dcmMode" />
								<Field Name="Parent" Type="dcmCategory:dcmParent" />
								<Field Name="Description" Type="dcmCategory:dcmDescription" />
								<Field Name="ImagePath" Type="dcString" />
							</Record>
						</ListResponse>
					</Op>
					<Op Name="List">
						<Description>
							Load a list all category records, no matter how many.
						</Description>
						<ListResponse>
							<Record>
								<Field Name="Id" Type="dcmCategory:Id" />
								<Field Name="Title" Type="dcmCategory:dcmTitle" />
								<Field Name="Alias" Type="dcmCategory:dcmAlias" />
								<Field Name="Mode" Type="dcmCategory:dcmMode" />
								<Field Name="Parent" Type="dcmCategory:dcmParent" />
								<Field Name="Description" Type="dcmCategory:dcmDescription" />
								<Field Name="ImagePath" Type="dcString" />
							</Record>
						</ListResponse>
					</Op>
				</Secure>
			</Feature>

			<Feature Name="Product">
				<Secure Badges="Admin,Clerk">
					<Op Name="Load">
						<Description>
							Load a product record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmProduct:Id" Required="IfPresent" />
							<Field Name="Alias" Type="dcmProduct:dcmAlias" Required="IfPresent" />
							<Field Name="TrLocale" Type="dcMetaString" Required="IfPresent" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="dcmProduct:Id" />
							<Field Name="Title" Type="dcmProduct:dcmTitle" />
							<Field Name="Alias" Type="dcmProduct:dcmAlias" />
							<Field Name="Sku" Type="dcmProduct:dcmSku" />
							<Field Name="Description" Type="dcmProduct:dcmDescription" />
							<Field Name="Instructions" Type="dcmProduct:dcmInstructions" />
							<Field Name="Image" Type="dcmProduct:dcmImage" />
							<Field Name="CustomDisplayField" Type="AnyList" />
							<Field Name="Categories">
								<List Type="dcmProduct:dcmCategories" />
							</Field>
							<Field Name="VariablePrice" Type="dcmProduct:dcmVariablePrice" />
							<Field Name="MinimumPrice" Type="dcmProduct:dcmMinimumPrice" />
							<Field Name="Price" Type="dcmProduct:dcmPrice" />
							<Field Name="ShipAmount" Type="dcmProduct:dcmShipAmount" />
							<Field Name="ShipWeight" Type="dcmProduct:dcmShipWeight" />
							<Field Name="ShipCost" Type="dcmProduct:dcmShipCost" />
							<Field Name="TaxFree" Type="dcmProduct:dcmTaxFree" />
							<Field Name="ShowInStore" Type="dcmProduct:dcmShowInStore" />
							<Field Name="Inventory" Type="dcmProduct:dcmInventory" />
							<Field Name="OrderLimit" Type="dcmProduct:dcmOrderLimit" />
							<Field Name="Delivery">
								<List Type="dcmProduct:dcmDelivery" />
							</Field>
							<Field Name="Tags">
								<List Type="dcmProduct:dcmTag" />
							</Field>
						</RecordResponse>
					</Op>
					<Op Name="Update">
						<Description>
							Update a product record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmProduct:Id" Required="True" />
							<Field Name="TrLocale" Type="dcMetaString" Required="IfPresent" />
							<Field Name="Title" Type="dcmProduct:dcmTitle" Required="IfPresent" />
							<Field Name="Alias" Type="dcmProduct:dcmAlias" Required="IfPresent" />
							<Field Name="Sku" Type="dcmProduct:dcmSku" />
							<Field Name="Description" Type="dcmProduct:dcmDescription" />
							<Field Name="Instructions" Type="dcmProduct:dcmInstructions" />
							<Field Name="Image" Type="dcmProduct:dcmImage" />
							<Field Name="CustomDisplayField" Type="AnyList" />
							<Field Name="Categories">
								<List Type="dcmProduct:dcmCategories" />
							</Field>
							<Field Name="VariablePrice" Type="dcmProduct:dcmVariablePrice" />
							<Field Name="MinimumPrice" Type="dcmProduct:dcmMinimumPrice" />
							<Field Name="Price" Type="dcmProduct:dcmPrice" />
							<Field Name="ShipAmount" Type="dcmProduct:dcmShipAmount" />
							<Field Name="ShipWeight" Type="dcmProduct:dcmShipWeight" />
							<Field Name="ShipCost" Type="dcmProduct:dcmShipCost" />
							<Field Name="TaxFree" Type="dcmProduct:dcmTaxFree" />
							<Field Name="ShowInStore" Type="dcmProduct:dcmShowInStore" />
							<Field Name="Inventory" Type="dcmProduct:dcmInventory" />
							<Field Name="OrderLimit" Type="dcmProduct:dcmOrderLimit" />
							<Field Name="Delivery">
								<List Type="dcmProduct:dcmDelivery" />
							</Field>
							<Field Name="Tags">
								<List Type="dcmProduct:dcmTag" />
							</Field>
						</RecordRequest>
					</Op>
					<Op Name="Add">
						<Description>
							Add a product record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="TrLocale" Type="dcMetaString" Required="IfPresent" />
							<Field Name="Title" Type="dcmProduct:dcmTitle" Required="True" />
							<Field Name="Alias" Type="dcmProduct:dcmAlias" Required="True" />
							<Field Name="Sku" Type="dcmProduct:dcmSku" />
							<Field Name="Description" Type="dcmProduct:dcmDescription" />
							<Field Name="Instructions" Type="dcmProduct:dcmInstructions" />
							<Field Name="Image" Type="dcmProduct:dcmImage" />
							<Field Name="CustomDisplayField" Type="AnyList" />
							<Field Name="Categories" Required="True">
								<List Type="dcmProduct:dcmCategories" />
							</Field>
							<Field Name="VariablePrice" Type="dcmProduct:dcmVariablePrice" />
							<Field Name="MinimumPrice" Type="dcmProduct:dcmMinimumPrice" />
							<Field Name="Price" Type="dcmProduct:dcmPrice" />
							<Field Name="ShipAmount" Type="dcmProduct:dcmShipAmount" />
							<Field Name="ShipWeight" Type="dcmProduct:dcmShipWeight" />
							<Field Name="ShipCost" Type="dcmProduct:dcmShipCost" />
							<Field Name="TaxFree" Type="dcmProduct:dcmTaxFree" />
							<Field Name="ShowInStore" Type="dcmProduct:dcmShowInStore" />
							<Field Name="Inventory" Type="dcmProduct:dcmInventory" />
							<Field Name="OrderLimit" Type="dcmProduct:dcmOrderLimit" />
							<Field Name="Delivery">
								<List Type="dcmProduct:dcmDelivery" />
							</Field>
							<Field Name="Tags">
								<List Type="dcmProduct:dcmTag" />
							</Field>
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="dcmProduct:Id" />
						</RecordResponse>
					</Op>
					<Op Name="Retire">
						<Description>
							Remove (retire) product record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmProduct:Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="Revive">
						<Description>
							Undo retirement of product record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmProduct:Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="CatList">
						<Description>
							Find product records based on category alias OR id.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Alias" Type="dcmCategory:dcmAlias" />
							<Field Name="Id" Type="dcmCategory:Id" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="CategoryId" Type="dcmCategory:Id" />
							<Field Name="CategoryAlias" Type="dcmCategory:dcmAlias" />
							<Field Name="Category" Type="dcmCategory:dcmTitle" />

							<Field Name="Products">
								<List>
									<Record>
										<Field Name="Id" Type="dcmProduct:Id" />
										<Field Name="Title" Type="dcmProduct:dcmTitle" />
										<Field Name="Alias" Type="dcmProduct:dcmAlias" />
										<Field Name="Sku" Type="dcmProduct:dcmSku" />
										<Field Name="Description" Type="dcmProduct:dcmDescription" />
										<Field Name="Image" Type="dcmProduct:dcmImage" />
										<Field Name="Price" Type="dcmProduct:dcmPrice" />
										<Field Name="ShowInStore" Type="dcmProduct:dcmShowInStore" />
									</Record>
								</List>
							</Field>
						</RecordResponse>
					</Op>
					<Op Name="List">
						<Description>
							Load a list all product records, no matter how many.
						</Description>
						<ListResponse>
							<Record>
								<Field Name="Id" Type="dcmProduct:Id" />
								<Field Name="Title" Type="dcmProduct:dcmTitle" />
								<Field Name="Alias" Type="dcmProduct:dcmAlias" />
								<Field Name="Sku" Type="dcmProduct:dcmSku" />
								<Field Name="Description" Type="dcmProduct:dcmDescription" />
								<Field Name="Image" Type="dcmProduct:dcmImage" />
								<Field Name="Price" Type="dcmProduct:dcmPrice" />
								<Field Name="ShowInStore" Type="dcmProduct:dcmShowInStore" />
							</Record>
						</ListResponse>
					</Op>
					<Op Name="LoadCustomFields">
						<Description>
							Load custom fields of a product.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Product" Type="Id" Required="IfPresent" />
							<Field Name="BasicForm" Type="Id" Required="IfPresent" />
						</RecordRequest>
						<ListResponse>
							<Record>
								<Field Name="Id" Type="Id" />
								<Field Name="Position" Type="dcmProductCustomFields:dcmPosition" />
								<Field Name="FieldType" Type="dcmProductCustomFields:dcmFieldType" />
								<Field Name="DataType" Type="dcmProductCustomFields:dcmDataType" />
								<Field Name="Label" Type="dcmProductCustomFields:dcmLabel" />
								<Field Name="LongLabel" Type="dcmProductCustomFields:dcmLongLabel" />
								<Field Name="Placeholder" Type="dcmProductCustomFields:dcmPlaceholder" />
								<Field Name="Pattern" Type="dcmProductCustomFields:dcmPattern" />
								<Field Name="Required" Type="dcmProductCustomFields:dcmRequired" />
								<Field Name="MaxLength" Type="dcmProductCustomFields:dcmMaxLength" />
								<Field Name="Horizontal" Type="dcmProductCustomFields:dcmHorizontal" />
								<Field Name="Price" Type="dcmProductCustomFields:dcmPrice" />
								<Field Name="Options">
									<List>
										<Record>
											<Field Name="Id" Type="dcMetaString" />
											<Field Name="Label" Type="dcmProductCustomFields:dcmOptionLabel" />
											<Field Name="Value" Type="dcmProductCustomFields:dcmOptionValue" />
											<Field Name="Price" Type="dcmProductCustomFields:dcmOptionPrice" />
											<Field Name="Weight" Type="dcmProductCustomFields:dcmOptionWeight" />
											<Field Name="Disabled" Type="dcmProductCustomFields:dcmOptionDisabled" />
										</Record>
									</List>
								</Field>
							</Record>
						</ListResponse>
					</Op>
					<Op Name="LoadCustomField">
						<Description>
							Load custom field of a product.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="Id" />
							<Field Name="Position" Type="dcmProductCustomFields:dcmPosition" />
							<Field Name="FieldType" Type="dcmProductCustomFields:dcmFieldType" />
							<Field Name="DataType" Type="dcmProductCustomFields:dcmDataType" />
							<Field Name="Label" Type="dcmProductCustomFields:dcmLabel" />
							<Field Name="LongLabel" Type="dcmProductCustomFields:dcmLongLabel" />
							<Field Name="Placeholder" Type="dcmProductCustomFields:dcmPlaceholder" />
							<Field Name="Pattern" Type="dcmProductCustomFields:dcmPattern" />
							<Field Name="Required" Type="dcmProductCustomFields:dcmRequired" />
							<Field Name="MaxLength" Type="dcmProductCustomFields:dcmMaxLength" />
							<Field Name="Horizontal" Type="dcmProductCustomFields:dcmHorizontal" />
							<Field Name="Price" Type="dcmProductCustomFields:dcmPrice" />
							<Field Name="Options">
								<List>
									<Record>
										<Field Name="Id" Type="dcMetaString" />
										<Field Name="Label" Type="dcmProductCustomFields:dcmOptionLabel" />
										<Field Name="Value" Type="dcmProductCustomFields:dcmOptionValue" />
										<Field Name="Price" Type="dcmProductCustomFields:dcmOptionPrice" />
										<Field Name="Weight" Type="dcmProductCustomFields:dcmOptionWeight" />
										<Field Name="Disabled" Type="dcmProductCustomFields:dcmOptionDisabled" />
									</Record>
								</List>
							</Field>
						</RecordResponse>
					</Op>
					<Op Name="AddCustomField">
						<Description>
							Add custom field to a product.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Product" Type="Id" Required="IfPresent" />
							<Field Name="BasicForm" Type="Id" Required="IfPresent" />
							<Field Name="Position" Type="dcmProductCustomFields:dcmPosition" />
							<Field Name="FieldType" Type="dcmProductCustomFields:dcmFieldType" Required="True" />
							<Field Name="DataType" Type="dcmProductCustomFields:dcmDataType" />
							<Field Name="Label" Type="dcmProductCustomFields:dcmLabel" Required="True" />
							<Field Name="LongLabel" Type="dcmProductCustomFields:dcmLongLabel" />
							<Field Name="Placeholder" Type="dcmProductCustomFields:dcmPlaceholder" />
							<Field Name="Pattern" Type="dcmProductCustomFields:dcmPattern" />
							<Field Name="Required" Type="dcmProductCustomFields:dcmRequired" />
							<Field Name="MaxLength" Type="dcmProductCustomFields:dcmMaxLength" />
							<Field Name="Horizontal" Type="dcmProductCustomFields:dcmHorizontal" />
							<Field Name="Price" Type="dcmProductCustomFields:dcmPrice" />
							<Field Name="AddOptions">
								<List>
									<Record>
										<Field Name="Label" Type="dcmProductCustomFields:dcmOptionLabel" Required="True" />
										<Field Name="Value" Type="dcmProductCustomFields:dcmOptionValue" Required="True" />
										<Field Name="Price" Type="dcmProductCustomFields:dcmOptionPrice" />
										<Field Name="Weight" Type="dcmProductCustomFields:dcmOptionWeight" />
										<Field Name="Disabled" Type="dcmProductCustomFields:dcmOptionDisabled" />
									</Record>
								</List>
							</Field>
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="Id" />
						</RecordResponse>
					</Op>
					<Op Name="UpdateCustomField">
						<Description>
							Update custom field to a product.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" />
							<Field Name="Position" Type="dcmProductCustomFields:dcmPosition" />
							<Field Name="FieldType" Type="dcmProductCustomFields:dcmFieldType" />
							<Field Name="DataType" Type="dcmProductCustomFields:dcmDataType" />
							<Field Name="Label" Type="dcmProductCustomFields:dcmLabel" />
							<Field Name="LongLabel" Type="dcmProductCustomFields:dcmLongLabel" />
							<Field Name="Placeholder" Type="dcmProductCustomFields:dcmPlaceholder" />
							<Field Name="Pattern" Type="dcmProductCustomFields:dcmPattern" />
							<Field Name="Required" Type="dcmProductCustomFields:dcmRequired" />
							<Field Name="MaxLength" Type="dcmProductCustomFields:dcmMaxLength" />
							<Field Name="Horizontal" Type="dcmProductCustomFields:dcmHorizontal" />
							<Field Name="Price" Type="dcmProductCustomFields:dcmPrice" />
							<Field Name="SetOptions">
								<List>
									<Record>
										<!-- leave off id to add option -->
										<Field Name="Id" Type="dcMetaString" Required="IfPresent" />
										<Field Name="Label" Type="dcmProductCustomFields:dcmOptionLabel" Required="True" />
										<Field Name="Value" Type="dcmProductCustomFields:dcmOptionValue" Required="True" />
										<Field Name="Price" Type="dcmProductCustomFields:dcmOptionPrice" />
										<Field Name="Weight" Type="dcmProductCustomFields:dcmOptionWeight" />
										<Field Name="Disabled" Type="dcmProductCustomFields:dcmOptionDisabled" />
									</Record>
								</List>
							</Field>
							<Field Name="RemoveOptions">
								<List Type="dcMetaString" />
							</Field>
						</RecordRequest>
					</Op>
					<Op Name="RemoveCustomField">
						<Description>
							Remove custom field from a product.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" />
						</RecordRequest>
					</Op>
					<Op Name="UpdateCustomFieldPositions">
						<Description>
							Update all positions of custom fields in a product/form.
						</Description>
						<ListRequest Required="True">
							<Record>
								<Field Name="Id" Type="Id" Required="True" />
								<Field Name="Position" Type="dcmProductCustomFields:dcmPosition" Required="True" />
							</Record>
						</ListRequest>
					</Op>
				</Secure>
				<Secure Badges="User,Guest">
					<Op Name="SearchAvailable">
						<Description>
							Search a list all available product records.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Term" Type="dcTinyString" Required="True" />
						</RecordRequest>
						<ListResponse>
							<Record>
								<Field Name="Id" Type="dcmProduct:Id" />
								<Field Name="Title" Type="dcmProduct:dcmTitle" />
								<Field Name="Alias" Type="dcmProduct:dcmAlias" />
								<Field Name="Sku" Type="dcmProduct:dcmSku" />
								<Field Name="Description" Type="dcmProduct:dcmDescription" />
								<Field Name="Image" Type="dcmProduct:dcmImage" />
								<Field Name="Price" Type="dcmProduct:dcmPrice" />
								<Field Name="VariablePrice" Type="dcmProduct:dcmVariablePrice" />
								<Field Name="Delivery">
									<List Type="dcmProduct:dcmDelivery" />
								</Field>
								<Field Name="Categories">
									<List>
										<Record>
											<Field Name="Id" Type="Id" />
											<Field Name="Title" Type="dcmCategory:dcmTitle" />
											<Field Name="Alias" Type="dcmCategory:dcmAlias" />
										</Record>
									</List>
								</Field>
								<Field Name="Score" Type="Decimal" />
							</Record>
						</ListResponse>
					</Op>
					<Op Name="Lookup">
						<Description>
							Find product record id based on alias.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmProduct:Id" />
							<Field Name="Alias" Type="dcmProduct:dcmAlias" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="dcmProduct:Id" />
							<Field Name="Title" Type="dcmProduct:dcmTitle" />
							<Field Name="Alias" Type="dcmProduct:dcmAlias" />
							<Field Name="Sku" Type="dcmProduct:dcmSku" />
							<Field Name="Description" Type="dcmProduct:dcmDescription" />
							<Field Name="Instructions" Type="dcmProduct:dcmInstructions" />
							<Field Name="Image" Type="dcmProduct:dcmImage" />
							<Field Name="Price" Type="dcmProduct:dcmPrice" />
							<Field Name="VariablePrice" Type="dcmProduct:dcmVariablePrice" />
							<Field Name="MinimumPrice" Type="dcmProduct:dcmMinimumPrice" />
							<Field Name="TaxFree" Type="dcmProduct:dcmTaxFree" />
							<Field Name="OrderLimit" Type="dcmProduct:dcmOrderLimit" />
							<Field Name="Delivery">
								<List Type="dcmProduct:dcmDelivery" />
							</Field>
							<Field Name="CustomFields" Type="dcmFormBuilderInfo" />
						</RecordResponse>
					</Op>
				</Secure>
			</Feature>

			<Feature Name="Discounts">
				<Secure Badges="Admin,Clerk">
					<Op Name="Load">
						<Description>
							Load a coupon record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmDiscount:Id" />
							<Field Name="Code" Type="dcmDiscount:dcmCode" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="dcmDiscount:Id" />
							<Field Name="Title" Type="dcmDiscount:dcmTitle" />
							<Field Name="Code" Type="dcmDiscount:dcmCode" />
							<Field Name="Type" Type="dcmDiscount:dcmType" />
							<Field Name="Mode" Type="dcmDiscount:dcmMode" />
							<Field Name="Active" Type="dcmDiscount:dcmActive" />
							<Field Name="Amount" Type="dcmDiscount:dcmAmount" />
							<Field Name="MinimumOrder" Type="dcmDiscount:dcmMinimumOrder" />
							<Field Name="Start" Type="dcmDiscount:dcmStart" />
							<Field Name="Expire" Type="dcmDiscount:dcmExpire" />
							<Field Name="Automatic" Type="dcmDiscount:dcmAutomatic" />
							<Field Name="OneTimeUse" Type="dcmDiscount:dcmOneTimeUse" />
							<Field Name="WasUsed" Type="dcmDiscount:dcmWasUsed" />
						</RecordResponse>
					</Op>
					<Op Name="Update">
						<Description>
							Update a coupon record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmDiscount:Id" Required="True" />
							<Field Name="Title" Type="dcmDiscount:dcmTitle" Required="IfPresent" />
							<Field Name="Type" Type="dcmDiscount:dcmType" />
							<Field Name="Mode" Type="dcmDiscount:dcmMode" Required="IfPresent" />
							<Field Name="Active" Type="dcmDiscount:dcmActive" />
							<Field Name="Code" Type="dcmDiscount:dcmCode" />
							<Field Name="Amount" Type="dcmDiscount:dcmAmount" />
							<Field Name="MinimumOrder" Type="dcmDiscount:dcmMinimumOrder" />
							<Field Name="Start" Type="dcmDiscount:dcmStart" />
							<Field Name="Expire" Type="dcmDiscount:dcmExpire" />
							<Field Name="Automatic" Type="dcmDiscount:dcmAutomatic" />
							<Field Name="OneTimeUse" Type="dcmDiscount:dcmOneTimeUse" />
							<Field Name="WasUsed" Type="dcmDiscount:dcmWasUsed" />
						</RecordRequest>
					</Op>
					<Op Name="Add">
						<Description>
							Add a coupon record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Title" Type="dcmDiscount:dcmTitle" Required="True" />
							<Field Name="Type" Type="dcmDiscount:dcmType" />
							<Field Name="Mode" Type="dcmDiscount:dcmMode" Required="True" />
							<Field Name="Active" Type="dcmDiscount:dcmActive" />
							<Field Name="Code" Type="dcmDiscount:dcmCode" />
							<Field Name="Amount" Type="dcmDiscount:dcmAmount" />
							<Field Name="MinimumOrder" Type="dcmDiscount:dcmMinimumOrder" />
							<Field Name="Start" Type="dcmDiscount:dcmStart" />
							<Field Name="Expire" Type="dcmDiscount:dcmExpire" />
							<Field Name="Automatic" Type="dcmDiscount:dcmAutomatic" />
							<Field Name="OneTimeUse" Type="dcmDiscount:dcmOneTimeUse" />
							<Field Name="WasUsed" Type="dcmDiscount:dcmWasUsed" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="dcmDiscount:Id" />
						</RecordResponse>
					</Op>
					<Op Name="Retire">
						<Description>
							Remove (retire) coupon record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmDiscount:Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="Revive">
						<Description>
							Undo retirement of coupon record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="dcmDiscount:Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="List">
						<Description>
							Load a list all coupon records, no matter how many.
							Filter by type is available.
						</Description>
						<!--
						<RecordRequest Required="True">
							<Field Name="Type" Type="dcmDiscount:dcmType" />
						</RecordRequest>
					-->
						<ListResponse>
							<Record>
								<Field Name="Id" Type="dcmDiscount:Id" />
								<Field Name="EntryDate" Type="dcmDiscount:dcmEntryDate" />
								<Field Name="Title" Type="dcmDiscount:dcmTitle" />
								<Field Name="Code" Type="dcmDiscount:dcmCode" />
								<Field Name="Type" Type="dcmDiscount:dcmType" />
								<Field Name="Mode" Type="dcmDiscount:dcmMode" />
								<Field Name="Active" Type="dcmDiscount:dcmActive" />
								<Field Name="Amount" Type="dcmDiscount:dcmAmount" />
								<Field Name="MinimumOrder" Type="dcmDiscount:dcmMinimumOrder" />
								<Field Name="Start" Type="dcmDiscount:dcmStart" />
								<Field Name="Expire" Type="dcmDiscount:dcmExpire" />
								<Field Name="Automatic" Type="dcmDiscount:dcmAutomatic" />
								<Field Name="OneTimeUse" Type="dcmDiscount:dcmOneTimeUse" />
								<Field Name="WasUsed" Type="dcmDiscount:dcmWasUsed" />
							</Record>
						</ListResponse>
					</Op>
				</Secure>
			</Feature>

			<Feature Name="GiftRegistry">
				<Secure Badges="Clerk,Admin">
					<Op Name="Load">
						<Description>
							Load a registry record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="Id" />
							<Field Name="For" Type="dcmGiftRegistry:dcmFor" />
							<Field Name="Intro" Type="dcmGiftRegistry:dcmIntro" />
							<Field Name="Detail" Type="dcmGiftRegistry:dcmDetail" />
							<Field Name="EventType" Type="dcmGiftRegistry:dcmEventType" />
							<Field Name="EventDate" Type="dcmGiftRegistry:dcmEventDate" />
							<Field Name="Products">
								<Record>
									<Field Name="Id" Type="Id" />
									<Field Name="Title" Type="dcmProduct:dcmTitle" />
									<Field Name="Alias" Type="dcmProduct:dcmAlias" />
									<Field Name="Image" Type="dcmProduct:dcmImage" />
								</Record>
							</Field>
						</RecordResponse>
					</Op>
					<Op Name="Update">
						<Description>
							Update a registry record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="For" Type="dcmGiftRegistry:dcmFor" />
							<Field Name="Intro" Type="dcmGiftRegistry:dcmIntro" />
							<Field Name="Detail" Type="dcmGiftRegistry:dcmDetail" />
							<Field Name="EventType" Type="dcmGiftRegistry:dcmEventType" Required="IfPresent" />
							<Field Name="EventDate" Type="dcmGiftRegistry:dcmEventDate" />
						</RecordRequest>
					</Op>
					<Op Name="Add">
						<Description>
							Add a registry record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="For" Type="dcmGiftRegistry:dcmFor" />
							<Field Name="Intro" Type="dcmGiftRegistry:dcmIntro" />
							<Field Name="Detail" Type="dcmGiftRegistry:dcmDetail" />
							<Field Name="EventType" Type="dcmGiftRegistry:dcmEventType" Required="True" />
							<Field Name="EventDate" Type="dcmGiftRegistry:dcmEventDate" />
						</RecordRequest>
						<RecordResponse>
							<Field Name="Id" Type="Id" />
						</RecordResponse>
					</Op>
					<Op Name="LinkProduct">
						<Description>
							Connect a product to a registry record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="RegistryId" Type="Id" Required="True" />
							<Field Name="ProductId" Type="Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="UnlinkProduct">
						<Description>
							Un connect a product to a registry record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="RegistryId" Type="Id" Required="True" />
							<Field Name="ProductId" Type="Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="Retire">
						<Description>
							Remove (retire) registry record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="Revive">
						<Description>
							Undo retirement of registry record.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Id" Type="Id" Required="True" />
						</RecordRequest>
					</Op>
					<Op Name="List">
						<Description>
							Load a list all registry records, no matter how many.
						</Description>
						<ListResponse>
							<Record>
								<Field Name="Id" Type="Id" />
								<Field Name="For" Type="dcmGiftRegistry:dcmFor" />
								<Field Name="EventType" Type="dcmGiftRegistry:dcmEventType" />
								<Field Name="EventDate" Type="dcmGiftRegistry:dcmEventDate" />
							</Record>
						</ListResponse>
					</Op>
					<Op Name="Search">
						<Description>
							Find registry record based on keywords.
						</Description>
						<RecordRequest Required="True">
							<Field Name="Term" Type="dcSmallString" Required="True" />
						</RecordRequest>
						<ListResponse>
							<Record>
								<Field Name="Id" Type="Id" />
								<Field Name="For" Type="dcmGiftRegistry:dcmFor" />
								<Field Name="EventType" Type="dcmGiftRegistry:dcmEventType" />
								<Field Name="EventDate" Type="dcmGiftRegistry:dcmEventDate" />
							</Record>
						</ListResponse>
					</Op>
				</Secure>
			</Feature>
		</Service>
		<Service Name="dcDatabase">
			<Feature Name="ExecuteProc">
				<Secure Badges="SysAdmin,Admin">
					<Op Name="dcmRecordShipment">
						<Description>
							Store a prepared shippment.
						</Description>
						<RecordRequest Inherits="dcdbCallBasic" Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="Shipment" Type="dcmOrderShipmentInfo" Required="True" />
							<Field Name="Items" Required="True">
								<List Type="dcMetaString" />
							</Field>
						</RecordRequest>
					</Op>
					<Op Name="dcmUpdateItems">
						<RecordRequest Inherits="dcdbCallBasic" Required="True">
							<Field Name="Id" Type="Id" Required="True" />
							<Field Name="Status" Type="dcmItemStatusEnum" Required="True" />
							<Field Name="Items" Required="True">
								<List Type="dcMetaString" />
							</Field>
						</RecordRequest>
					</Op>
				</Secure>
			</Feature>
		</Service>
	</Services>
</Schema>
